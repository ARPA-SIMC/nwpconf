<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>NWPconf: /lhome/lm_ope/nwpconf/bin/nwpconf.sh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NWPconf
   &#160;<span id="projectnumber">Version1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2ea30aa2956a8db99dd22aa5e597f384.html">bin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">nwpconf.sh File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main entry point for the NWPconf bash library.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afedab27d166f281dfc2b4068866ab896"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#afedab27d166f281dfc2b4068866ab896">conf_init</a> ()</td></tr>
<tr class="memdesc:afedab27d166f281dfc2b4068866ab896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a list of configuration directories for current configuration.  <a href="#afedab27d166f281dfc2b4068866ab896">More...</a><br/></td></tr>
<tr class="separator:afedab27d166f281dfc2b4068866ab896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6bf8e1c716e78c69c01e58f09c0693d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#ad6bf8e1c716e78c69c01e58f09c0693d">conf_getfile</a> ($1)</td></tr>
<tr class="memdesc:ad6bf8e1c716e78c69c01e58f09c0693d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the path of the requested file according to current configuration.  <a href="#ad6bf8e1c716e78c69c01e58f09c0693d">More...</a><br/></td></tr>
<tr class="separator:ad6bf8e1c716e78c69c01e58f09c0693d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ba5eaf6adc92f094b482761e8ff8b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#ad1ba5eaf6adc92f094b482761e8ff8b0">conf_template</a> ($*)</td></tr>
<tr class="memdesc:ad1ba5eaf6adc92f094b482761e8ff8b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate file from template.  <a href="#ad1ba5eaf6adc92f094b482761e8ff8b0">More...</a><br/></td></tr>
<tr class="separator:ad1ba5eaf6adc92f094b482761e8ff8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3c71ec4b1d9bbcf3d3d6903fb70996"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a9f3c71ec4b1d9bbcf3d3d6903fb70996">date_add</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:a9f3c71ec4b1d9bbcf3d3d6903fb70996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the requested number of hours to a date and return the date.  <a href="#a9f3c71ec4b1d9bbcf3d3d6903fb70996">More...</a><br/></td></tr>
<tr class="separator:a9f3c71ec4b1d9bbcf3d3d6903fb70996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6686a7d7161bc7786ae06ccff864d5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#ad6686a7d7161bc7786ae06ccff864d5e">time_add</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:ad6686a7d7161bc7786ae06ccff864d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the requested number of hours to a date and return the time.  <a href="#ad6686a7d7161bc7786ae06ccff864d5e">More...</a><br/></td></tr>
<tr class="separator:ad6686a7d7161bc7786ae06ccff864d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64380eed3d10bb0f845d7ad316a5d894"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a64380eed3d10bb0f845d7ad316a5d894">datetime_add</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:a64380eed3d10bb0f845d7ad316a5d894"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the requested number of hours to a date and return date and time.  <a href="#a64380eed3d10bb0f845d7ad316a5d894">More...</a><br/></td></tr>
<tr class="separator:a64380eed3d10bb0f845d7ad316a5d894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59aef52dc1242cf73dddb82a2f80b515"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a59aef52dc1242cf73dddb82a2f80b515">date_sub</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:a59aef52dc1242cf73dddb82a2f80b515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract the requested number of hours to a date and return the date.  <a href="#a59aef52dc1242cf73dddb82a2f80b515">More...</a><br/></td></tr>
<tr class="separator:a59aef52dc1242cf73dddb82a2f80b515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5501d5ed9041d472dcdd5913f14c04d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a5501d5ed9041d472dcdd5913f14c04d0">time_sub</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:a5501d5ed9041d472dcdd5913f14c04d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract the requested number of hours to a date and return the time.  <a href="#a5501d5ed9041d472dcdd5913f14c04d0">More...</a><br/></td></tr>
<tr class="separator:a5501d5ed9041d472dcdd5913f14c04d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef842f1990cb7089b912b9fe0a833cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a6ef842f1990cb7089b912b9fe0a833cc">datetime_sub</a> ($1, $2, $3)</td></tr>
<tr class="memdesc:a6ef842f1990cb7089b912b9fe0a833cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract the requested number of hours to a date and return date and time.  <a href="#a6ef842f1990cb7089b912b9fe0a833cc">More...</a><br/></td></tr>
<tr class="separator:a6ef842f1990cb7089b912b9fe0a833cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4420474bc1e34f7356ce7f488829a221"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a4420474bc1e34f7356ce7f488829a221">date_now</a> ()</td></tr>
<tr class="memdesc:a4420474bc1e34f7356ce7f488829a221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current date.  <a href="#a4420474bc1e34f7356ce7f488829a221">More...</a><br/></td></tr>
<tr class="separator:a4420474bc1e34f7356ce7f488829a221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a568785c1683ea6494c222cc8124135ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a568785c1683ea6494c222cc8124135ca">time_now</a> ()</td></tr>
<tr class="memdesc:a568785c1683ea6494c222cc8124135ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current time.  <a href="#a568785c1683ea6494c222cc8124135ca">More...</a><br/></td></tr>
<tr class="separator:a568785c1683ea6494c222cc8124135ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdce86823732d8e6f26f3af2db5da6b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#acdce86823732d8e6f26f3af2db5da6b9">datetime_now</a> ()</td></tr>
<tr class="memdesc:acdce86823732d8e6f26f3af2db5da6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current time.  <a href="#acdce86823732d8e6f26f3af2db5da6b9">More...</a><br/></td></tr>
<tr class="separator:acdce86823732d8e6f26f3af2db5da6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb61243eb4f8340531a826cabe056f34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#aeb61243eb4f8340531a826cabe056f34">datetime_cnmc</a> ($1, $2)</td></tr>
<tr class="memdesc:aeb61243eb4f8340531a826cabe056f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output the provided date and time in the format required by CNMC.  <a href="#aeb61243eb4f8340531a826cabe056f34">More...</a><br/></td></tr>
<tr class="separator:aeb61243eb4f8340531a826cabe056f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6aa37dc2b6509e244e219be9e53360"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#adb6aa37dc2b6509e244e219be9e53360">max</a> ($1, $2)</td></tr>
<tr class="memdesc:adb6aa37dc2b6509e244e219be9e53360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the maximum between two numerical arguments.  <a href="#adb6aa37dc2b6509e244e219be9e53360">More...</a><br/></td></tr>
<tr class="separator:adb6aa37dc2b6509e244e219be9e53360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a419087d2adf1fd51353ef3f214b222e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nwpconf_8sh.html#a419087d2adf1fd51353ef3f214b222e9">timeout_exec</a> ($1,$*)</td></tr>
<tr class="memdesc:a419087d2adf1fd51353ef3f214b222e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a command with a specified timeout.  <a href="#a419087d2adf1fd51353ef3f214b222e9">More...</a><br/></td></tr>
<tr class="separator:a419087d2adf1fd51353ef3f214b222e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main entry point for the NWPconf bash library. </p>
<p>The file <a class="el" href="nwpconf_8sh.html" title="Main entry point for the NWPconf bash library. ">nwpconf.sh</a> is the main entry point for the whole package, it has to be sourced by the user script and other optional modules of this package have to be sourced after this.</p>
<p>This module provides tools for managing multiple configurations and generating configuration files from templates, tools for date and time computations and other utilities.</p>
<h3>Managing multiple configurations</h3>
<p>Configurations in nwpconf are managed in a hierarchical way, the user defines a common directory tree rooted at <code>$NWPCONFDIR</code> containing different branches for different processes to be configured. The configuration for the current process is defined by the <code>$NWPCONF</code> variable, thus all the directory levels between <code>$NWPCONFDIR</code> and <code>$NWPCONFDIR/$NPWCONF</code> define the configuration for the current process, with growing priority from <code>$NWPCONFDIR</code> to <code>$NWPCONFDIR/$NPWCONF</code>.</p>
<p>When the <code>$ENS_MEMB</code> variable is set to a nonempty value, the configuration is said to be running in ensemble mode, providing extra features for managing ensemble member-specific configurations and files.</p>
<h3>Defining the configuration and importing it in the environment</h3>
<p>Each of these directory levels may contain a shell script file <code>conf.sh</code>; upon sourcing of the current module, the configuration tree for the requested configuration is scanned and <em>all</em> the <code>conf.sh</code> scripts encountered are sourced in order of growing priority. In this way, environment variable assignments made in following levels will override the ones made in the previous levels. The <code>conf.sh</code> files should mainly contain assignments of variable with shell syntax, however any arbitrary shell code in them will be regularly executed. If a directory level does not contain such a file, it will be skipped without errors. All the configuration files in the tree are sourced in automatic export mode, so that all variable assignments are exported even without the explicit <code>export</code> keyword. Thus, after sourcing the present script, the user environment will contain all the variable assignments according to the requested configurations.</p>
<p>When running in ensemble mode, in every directory of the tree a file named <code>conf.sh.$ENS_MEMB</code> is searched for and sourced if found, after the corresponding <code>conf.sh</code> file, thus allowing to define an ensemble member-specific configuration.</p>
<h3>Generating configuration files from templates</h3>
<p>The configuration tree described above can also contain template files named <code>&lt;filename&gt;.in</code>. By means of the function <a class="el" href="nwpconf_8sh.html#ad1ba5eaf6adc92f094b482761e8ff8b0" title="Generate file from template. ">conf_template()</a>, the file <code>&lt;filename&gt;</code> will be generated in the current directory starting from the template file <code>&lt;filename&gt;.in</code> found in the configuration tree; unlike the case for <code>conf.sh</code>, if more than one matching template file is found in the tree, <em>only</em> the one contained in the directory with the highest priority is used. Any occurrence of <code>@&lt;string&gt;@</code> in the template file will be replaced by the current value of <code>$&lt;string&gt;</code> environment variable in the destination file. Any occurrence of <code>@INCLUDE &lt;file&gt;@</code> in the template file determines the inclusion of <code>&lt;file&gt;</code> in that point, applying recursively the same variable substitutions and file inclusion rules. If <code>&lt;file&gt;</code> contains a directory specification, either relative or absolute, it is searched starting from the current directory, otherwise it is searchd in the configuration tree with the same rules used for finding the template file.</p>
<p>When running in ensemble mode, in every directory of the tree, files named <code>&lt;filename&gt;.in.ens</code> and <code>&lt;filename&gt;.in.$ENS_MEMB</code> are also searched for, with increasing priority and with a higher priority than the corresponding <code>&lt;filename&gt;.in</code>.</p>
<h3>Picking different variants of a generic file</h3>
<p>The configuration tree can also contain generic files ready for use, at different configuration levels, the function <a class="el" href="nwpconf_8sh.html#ad6bf8e1c716e78c69c01e58f09c0693d" title="Return the path of the requested file according to current configuration. ">conf_getfile()</a> helps in choosing the one with highest priority in these cases.</p>
<p>As indicated above for template files, here too, in ensemble mode, the name of a file with an additional extension <code>.ens</code> (for any member, with lower priority) or <code>.$ENS_MEMB</code> (for a specific member, with higher priority), if present, is returned in place of the corresponding file without additional extension. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afedab27d166f281dfc2b4068866ab896"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">conf_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a list of configuration directories for current configuration. </p>
<p>This function is implicitly called when sourcing the present module, so it is unlikely for it to be called directly by the user; it creates the list of directories to search for configuration files in, according to the user selected configuration <code>$NWPCONF</code> and the configuration root <code>$NWPCONFDIR</code>, ordered from lower to higher priority. </p>

</div>
</div>
<a class="anchor" id="ad6bf8e1c716e78c69c01e58f09c0693d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">conf_getfile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the path of the requested file according to current configuration. </p>
<p>This functions prints on stdout the name of the requested configuration file contained in the configuration tree defined by <code>$NWPCONFDIR</code> and <code>$NWPCONF</code>. If more than one file with the requested name is found, only the one with highest priority is returned, if no files are found the function returns with an error code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>the name of the requested file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad1ba5eaf6adc92f094b482761e8ff8b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">conf_template </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$*</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate file from template. </p>
<p>This function generates one or more files from the corresponding template according to the current configuration tree <code>$NWPCONF</code>. One or more template files with the same name and additional suffix <code>.in</code> must exist in the configuration tree, the one with highest priority will be used for generating the file in the current directory, if no template file is found the function returns with an error code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$*</td><td>list of files to be generated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9f3c71ec4b1d9bbcf3d3d6903fb70996"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">date_add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the requested number of hours to a date and return the date. </p>
<p>This function takes in input a date and time string, adds to it an integer number of hours and prints to standard output only the recomputed date in the format <code>YYYYMMDD</code>. All the computations are performed in UTC unless the variable <code>$DATECOM</code> is changed from its default value <code>date -u</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to add, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6686a7d7161bc7786ae06ccff864d5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the requested number of hours to a date and return the time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a9f3c71ec4b1d9bbcf3d3d6903fb70996" title="Add the requested number of hours to a date and return the date. ">date_add()</a> but it prints to standard output only the recomputed time in the format <code>HH</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to add, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a64380eed3d10bb0f845d7ad316a5d894"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">datetime_add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the requested number of hours to a date and return date and time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a9f3c71ec4b1d9bbcf3d3d6903fb70996" title="Add the requested number of hours to a date and return the date. ">date_add()</a> but it prints to standard output the recomputed date and time in the format <code>YYYYMMDDHH</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to add, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a59aef52dc1242cf73dddb82a2f80b515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">date_sub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subtract the requested number of hours to a date and return the date. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a9f3c71ec4b1d9bbcf3d3d6903fb70996" title="Add the requested number of hours to a date and return the date. ">date_add()</a> but it subtracts hours rather then adding them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to subtract, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5501d5ed9041d472dcdd5913f14c04d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_sub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subtract the requested number of hours to a date and return the time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#ad6686a7d7161bc7786ae06ccff864d5e" title="Add the requested number of hours to a date and return the time. ">time_add()</a> but it subtracts hours rather then adding them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to subtract, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6ef842f1990cb7089b912b9fe0a833cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">datetime_sub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subtract the requested number of hours to a date and return date and time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a64380eed3d10bb0f845d7ad316a5d894" title="Add the requested number of hours to a date and return date and time. ">datetime_add()</a> but it subtracts hours rather then adding them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>initial date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>initial time in the format <code>HH</code> </td></tr>
    <tr><td class="paramname">$3</td><td>number of hours to subtract, integer with <b>no leading zeroes</b>, negative values accepted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4420474bc1e34f7356ce7f488829a221"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">date_now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current date. </p>
<p>This function prints on stdout the current date in the format <code>YYYYMMDD</code>; the date is expressed in UTC unless the variable <code>$DATECOM</code> is changed from its default value <code>date -u</code>. </p>

</div>
</div>
<a class="anchor" id="a568785c1683ea6494c222cc8124135ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a4420474bc1e34f7356ce7f488829a221" title="Return the current date. ">date_now()</a> but it prints the current time in the format <code>HH</code>. </p>

</div>
</div>
<a class="anchor" id="acdce86823732d8e6f26f3af2db5da6b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">datetime_now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current time. </p>
<p>This function works as <a class="el" href="nwpconf_8sh.html#a4420474bc1e34f7356ce7f488829a221" title="Return the current date. ">date_now()</a> but it prints the current date and time in the format <code>YYYYMMDDHH</code>. </p>

</div>
</div>
<a class="anchor" id="aeb61243eb4f8340531a826cabe056f34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">datetime_cnmc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output the provided date and time in the format required by CNMC. </p>
<p>This function prints to standard output the provided date and time in the format <code>MMDDHHMM</code> as used in the files provided by the Italian Military Meteorological Service (cnmc in WMO abbreviations). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>date in the format <code>YYYYMMDD</code> </td></tr>
    <tr><td class="paramname">$2</td><td>time in the format <code>HH</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adb6aa37dc2b6509e244e219be9e53360"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">max </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the maximum between two numerical arguments. </p>
<p>This function computes the maximum between the two integer numerical arguments provided and prints it to stdout, thus it should tipically be used as: <code>M=`max $H1 $H2</code>`. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>the first numerical argument </td></tr>
    <tr><td class="paramname">$2</td><td>the second numerical argument </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a419087d2adf1fd51353ef3f214b222e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timeout_exec </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$*</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute a command with a specified timeout. </p>
<p>This function executes an arbitrary command killing it when the requested time has elapsed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>value of the timeout in seconds </td></tr>
    <tr><td class="paramname">$*</td><td>command to be executed and optional extra-arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
