<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>NWPconf: /lhome/lm_ope/nwpconf/bin/parcomp.sh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NWPconf
   &#160;<span id="projectnumber">Version1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2ea30aa2956a8db99dd22aa5e597f384.html">bin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">parcomp.sh File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Module with utilities for parallel computing and batch scheduling.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abf9a3c443f0de1964b2b847f65c7f260"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="parcomp_8sh.html#abf9a3c443f0de1964b2b847f65c7f260">cd_submit_dir</a> ()</td></tr>
<tr class="memdesc:abf9a3c443f0de1964b2b847f65c7f260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change working directory to submit directory.  <a href="#abf9a3c443f0de1964b2b847f65c7f260">More...</a><br/></td></tr>
<tr class="separator:abf9a3c443f0de1964b2b847f65c7f260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b42f1ac61b0fc006c48612b9057141"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="parcomp_8sh.html#aa4b42f1ac61b0fc006c48612b9057141">parcomp_init</a> ()</td></tr>
<tr class="memdesc:aa4b42f1ac61b0fc006c48612b9057141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the environment for parallel computing.  <a href="#aa4b42f1ac61b0fc006c48612b9057141">More...</a><br/></td></tr>
<tr class="separator:aa4b42f1ac61b0fc006c48612b9057141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c4934debfb6099e6e6b22532e59e45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="parcomp_8sh.html#ac8c4934debfb6099e6e6b22532e59e45">parcomp_computetopo</a> ($1)</td></tr>
<tr class="memdesc:ac8c4934debfb6099e6e6b22532e59e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute a 2-D processor topology from the total number of tasks.  <a href="#ac8c4934debfb6099e6e6b22532e59e45">More...</a><br/></td></tr>
<tr class="separator:ac8c4934debfb6099e6e6b22532e59e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7637c3188d3baf3cf7d8ea78f95d8243"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="parcomp_8sh.html#a7637c3188d3baf3cf7d8ea78f95d8243">parcomp_mpirun</a> ($*)</td></tr>
<tr class="memdesc:a7637c3188d3baf3cf7d8ea78f95d8243"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a parallel MPI process starting the required number of tasks.  <a href="#a7637c3188d3baf3cf7d8ea78f95d8243">More...</a><br/></td></tr>
<tr class="separator:a7637c3188d3baf3cf7d8ea78f95d8243"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Module with utilities for parallel computing and batch scheduling. </p>
<p>This module provides some functions that help in performing operations related to parallel computing and interaction with a batch scheduler, such as defining a Cartesian topology and starting parallel MPI executables in an MPI implementation- and scheduler-independent way. It is an optional module and it has to be sourced after the main <em><a class="el" href="nwpconf_8sh.html" title="Main entry point for the NWPconf bash library. ">nwpconf.sh</a></em> module. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abf9a3c443f0de1964b2b847f65c7f260"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cd_submit_dir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change working directory to submit directory. </p>
<p>This function changes the current working directory to the directory from which a job was submitted to a batch scheduler; outside a batch environment it silently does nothing. It is useful to write portable scripts that can work both on the command line and under a batch scheduler. </p>

</div>
</div>
<a class="anchor" id="aa4b42f1ac61b0fc006c48612b9057141"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parcomp_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the environment for parallel computing. </p>
<p>This functions is implicitly called when the module is sourced, it sets up the environment for parallel computing from the HPC scheduling environment of the process, if available (Slurm, PBS and LoadLeveler supported). If no scheduling environment is available, the environmental variable $NPTOTAL is used as number of desired parallel tasks. If set in input, the variable $NPIO indicates the number of tasks dedicated to I/O, not involved in Cartesian computation. The <a class="el" href="parcomp_8sh.html#ac8c4934debfb6099e6e6b22532e59e45" title="Compute a 2-D processor topology from the total number of tasks. ">parcomp_computetopo()</a> function is implicitly called by this function with the proper mumber of computational tasks. On output, the variables <code>$NPX</code>, <code>$NPY</code>, <code>$NPIO</code> (if not set on input) and <code>$NP</code> (total number of parallel tasks including I/O tasks) are set. </p>

</div>
</div>
<a class="anchor" id="ac8c4934debfb6099e6e6b22532e59e45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parcomp_computetopo </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$1</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute a 2-D processor topology from the total number of tasks. </p>
<p>This function computes a reasonable 2-D task (processor) Cartesian topology for parallel computing given the total number of computational tasks. The topology is set in the <code>$NPX</code> <code>$NPY</code> environment variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$1</td><td>the number of computational tasks requested </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7637c3188d3baf3cf7d8ea78f95d8243"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parcomp_mpirun </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$*</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a parallel MPI process starting the required number of tasks. </p>
<p>This function runs a parallel MPI process starting the required number of tasks, in a scheduler-independent and MPI implementation-independent way (not yet implemented). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$*</td><td>additional arguments to mpirun, parallel executable and its optional arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
